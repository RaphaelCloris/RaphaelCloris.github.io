<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¤Šå¯µç‰©é¸æ“‡å™¨ï¼šå°æ¨¹ or é›»å­é›</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background: linear-gradient(to bottom, #87CEEB, #E0F7FA); margin: 0; padding: 20px; min-height: 100vh; }
        h1 { color: #2E8B57; }
        button { padding: 15px 30px; font-size: 20px; margin: 20px; background: #4CAF50; color: white; border: none; border-radius: 10px; cursor: pointer; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        button:hover { background: #45a049; }
        button:disabled { background: #cccccc; cursor: not-allowed; }
        .section { display: none; margin: 50px auto; max-width: 600px; }
        .active { display: block; }
        .pet { font-size: 120px; margin: 30px; }
        p { font-size: 24px; color: #333; }
        .status { font-size: 18px; color: #666; margin: 20px; }
    </style>
</head>
<body>
    <h1>æ­¡è¿ä¾†é¤Šå¯µç‰©ï¼ğŸ¾</h1>
    <p>é¸æ“‡ä½ è¦é¤Šçš„ï¼š</p>
    <button onclick="choose('tree')">é¤Šä¸€æ£µå°æ¨¹ ğŸŒ±</button>
    <button onclick="choose('chick')">é¤Šä¸€éš»é›»å­é› ğŸ”</button>

    <!-- é¤Šæ¨¹å€ -->
    <div id="treeSection" class="section">
        <h2>æˆ‘çš„å°æ¨¹è‹—</h2>
        <p>æ¯å¤©ä¾†æ¾†æ°´ï¼Œè®“æ¨¹é•·å¤§å§ï¼</p>
        <div class="pet" id="treePet">ğŸŒ±</div>
        <p id="treeMessage">ä»Šå¤©é‚„æ²’æ¾†æ°´å“¦ï½</p>
        <button id="waterBtn">æ¾†æ°´ ğŸ’§</button>
        <div class="status" id="treeDays">å·²æ¾†æ°´ 0 å¤©</div>
        <button onclick="back()">å›é¸æ“‡</button>
    </div>

    <!-- é›»å­é›å€ -->
    <div id="chickSection" class="section">
        <h2>æˆ‘çš„é›»å­é›</h2>
        <p>ç…§é¡§å®ƒï¼Œè®“å®ƒé–‹å¿ƒï¼ğŸ¥</p>
        <div class="pet" id="chickPet">ğŸ¥</div>
        <p id="chickMessage">è‚šå­é¤“äº†ï½</p>
        <button onclick="action('feed')">é¤µé£Ÿ ğŸ</button>
        <button onclick="action('play')">ç©è€ âš½</button>
        <button onclick="action('sleep')">ç¡è¦º ğŸ’¤</button>
        <div class="status" id="chickStatus">å¹¸ç¦åº¦ï¼š50</div>
        <button onclick="back()">å›é¸æ“‡</button>
    </div>

    <script>
        function choose(type) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            if (type === 'tree') {
                document.getElementById('treeSection').classList.add('active');
                loadTree();
            } else {
                document.getElementById('chickSection').classList.add('active');
                loadChick();
            }
        }

        function back() {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        }

        // === é¤Šæ¨¹éƒ¨åˆ† ===
        const treePets = ['ğŸŒ±', 'ğŸŒ¿', 'ğŸŒ³', 'ğŸª´'];
        const treeMsgs = ['é€™æ˜¯ä¸€é¡†å°å°çš„ç¨®å­ï½', 'ç™¼èŠ½äº†ï¼å¥½å¯æ„›ï½', 'æ¨¹è®Šå¤§äº†ï¼ç¹¼çºŒåŠ æ²¹ï¼', 'å“‡ï¼å¤§æ¨¹é•·æˆäº†ï¼è¬è¬ä½  ğŸ¥°'];

        function getToday() { return new Date().toISOString().slice(0, 10); }

        function loadTree() {
            let count = parseInt(localStorage.getItem('treeCount') || '0');
            let lastDate = localStorage.getItem('treeLast') || '';
            const today = getToday();
            const stage = Math.min(count, 3);

            document.getElementById('treePet').textContent = treePets[stage];
            document.getElementById('treeDays').textContent = `å·²æ¾†æ°´ ${count} å¤©`;
            const waterBtn = document.getElementById('waterBtn');

            if (lastDate === today) {
                document.getElementById('treeMessage').textContent = 'æ˜å¤©å†ä¾†æ¾†æ°´å“¦ï¼';
                waterBtn.disabled = true;
                waterBtn.textContent = 'ä»Šå¤©å·²æ¾†æ°´ âœ…';
            } else {
                document.getElementById('treeMessage').textContent = treeMsgs[stage];
                waterBtn.disabled = false;
                waterBtn.textContent = 'æ¾†æ°´ ğŸ’§';
            }

            waterBtn.onclick = () => {
                if (lastDate === today) return;
                count++;
                localStorage.setItem('treeCount', count);
                localStorage.setItem('treeLast', today);
                loadTree();  // åˆ·æ–°
            };
        }

        // === é›»å­é›éƒ¨åˆ† ===
        const chickPets = ['ğŸ¥', 'ğŸ¤', 'ğŸ”', 'ğŸ¥š'];  // æ­£å¸¸ã€é–‹å¿ƒã€ç”Ÿæ°£ã€é›¢é–‹ï¼ˆå¦‚æœå¤ªä½ï¼‰
        let happiness = 50;

        function loadChick() {
            happiness = parseInt(localStorage.getItem('chickHappy') || '50');
            updateChick();
        }

        function updateChick() {
            const pet = document.getElementById('chickPet');
            const msg = document.getElementById('chickMessage');
            const status = document.getElementById('chickStatus');

            if (happiness > 80) { pet.textContent = 'ğŸ¤'; msg.textContent = 'è¶…é–‹å¿ƒï¼è¬è¬ä¸»äººï½â¤ï¸'; }
            else if (happiness > 50) { pet.textContent = 'ğŸ¥'; msg.textContent = 'å¿ƒæƒ…ä¸éŒ¯ï¼'; }
            else if (happiness > 20) { pet.textContent = 'ğŸ”'; msg.textContent = 'æœ‰é»ä¸çˆ½â€¦å¿«ä¾†é™ªæˆ‘ï¼'; }
            else { pet.textContent = 'ğŸ¥š'; msg.textContent = 'å®ƒç”Ÿæ°£é›¢é–‹äº†â€¦é‡æ–°é–‹å§‹å§ ğŸ˜¢'; happiness = 50; }

            status.textContent = `å¹¸ç¦åº¦ï¼š${happiness}`;
            localStorage.setItem('chickHappy', happiness);
        }

        function action(type) {
            if (type === 'feed') happiness = Math.min(100, happiness + 20);
            if (type === 'play') happiness = Math.min(100, happiness + 15);
            if (type === 'sleep') happiness = Math.min(100, happiness + 10);
            if (happiness <= 20) happiness = 50;  // é‡ç½®
            updateChick();
        }
    </script>
</body>
</html>
